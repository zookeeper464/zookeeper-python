import sys

def solution():

  while True:
    arr = list(map(int, sys.stdin.readline().split()))
    if (arr[0] == 0): return
    #탈출

    N = arr[0]
    #입력값의 갯수

    arr = arr[1:]
    #입력값

    arr.append(0)
    arr.insert(0, 0)
    #입력값 앞 뒤에 0 추가

    check = [0]
    square = 0
    #답 처리 변수 설정

    for i in range(1, N+2):
      while check and (arr[check[-1]] > arr[i]):
        h = check.pop()
        square = max(square, (i - 1 - check[-1]) * arr[h])
      check.append(i)
      print(check)

    print(square)
solution()
